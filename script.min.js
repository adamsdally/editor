function buildSelection(e){console.log("..........Range......."),console.log(e);var n,t,r=[],o=[],i=[];if(e.startContainer.length==e.startOffset){for(console.log("...at end of start"),next=e.startContainer.nextSibling?e.startContainer.nextSibling:e.startContainer.parentElement.nextSibling;next.firstChild;)next=next.firstChild;console.log(next),console.log(next.length),e.setStart(next,0),console.log(e)}if(0==e.endOffset){for(console.log("...at beginning of end"),previous=e.endContainer.previousSibling?e.endContainer.previousSibling:e.endContainer.parentElement.previousSibling;previous.lastChild;)previous=previous.lastChild;console.log(previous),console.log(previous.innerHTML),console.log(previous.length),e.setEnd(previous,previous.length),console.log(e)}if(e.startContainer==e.endContainer)return r.push(0==e.startOffset&&e.endOffset==e.endContainer.length?1==e.startContainer.parentElement.childNodes.length?{node:e.startContainer.parentElement}:{node:e.startContainer}:{node:e.startContainer,startOffset:e.startOffset,endOffset:e.endOffset}),r;for(n=e.startContainer,t=e.endContainer;n.parentElement!=e.commonAncestorContainer;)n=n.parentElement;for(;t.parentElement!=e.commonAncestorContainer;)t=t.parentElement;for(current=e.startContainer,e.startOffset&&(current.length>e.startOffset&&o.push({node:current,startOffset:e.startOffset}),current=current.nextSibling?current.nextSibling:current.parentElement);current!=n&&current!=t;)current.previousSibling&&current.nextSibling?(o.push({node:current}),current=current.nextSibling):current.previousSibling&&!current.nextSibling?(o.push({node:current}),current=current.parentElement):current=current.parentElement;for(current=e.endContainer,e.endOffset&&e.endOffset!=e.endContainer.length&&(i.push({node:current,endOffset:e.endOffset}),current=current.previousSibling?current.previousSibling:current.parentElement);current!=t&&current!=n;)current.previousSibling&&current.nextSibling?(i.push({node:current}),current=current.previousSibling):!current.previousSibling&&current.nextSibling?(i.push({node:current}),current=current.parentElement):current=current.parentElement;if(0==o.length&&0==i.length&&!n.previousElementSibling&&!t.nextElementSibling)return r.push({node:e.commonAncestorContainer}),r;for(0==o.length&&o.push({node:n}),0==i.length&&i.push({node:t}),current=n;current.nextSibling!=t;)current=current.nextSibling,r.push({node:current});return r.concat(o,i)}
//# sourceMappingURL=script.min.js.map
